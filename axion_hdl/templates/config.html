{% extends "base.html" %}

{% block title %}Tool Config - Axion HDL{% endblock %}

{% block head %}
<link rel="stylesheet"
    href="{{ url_for('static', filename='css/modules/config.css') }}?v={{ range(1, 10000) | random }}">
{% endblock %}

{% block content %}
<!-- Source Directories -->
<div class="config-section">
    <h4><i class="bi bi-folder-fill"></i> Source Directories</h4>
    <ul class="path-list" id="srcDirsList"></ul>
    <div class="add-path-form">
        <input type="text" id="newSrcDir" placeholder="Select or enter directory path">
        <button onclick="browseFolder()" class="btn-browse"><i class="bi bi-folder2-open"></i> Browse</button>
        <button onclick="addSource('dir')"><i class="bi bi-plus-lg"></i> Add</button>
    </div>
</div>

<!-- Source Files -->
<div class="config-section">
    <h4><i class="bi bi-file-earmark-code-fill"></i> Source Files</h4>
    <ul class="path-list" id="srcFilesList"></ul>
    <div class="add-path-form">
        <input type="text" id="newSrcFile" placeholder="Select or enter file path">
        <button onclick="browseFile()" class="btn-browse"><i class="bi bi-file-earmark"></i> Browse</button>
        <button onclick="addSource('file')"><i class="bi bi-plus-lg"></i> Add</button>
    </div>
</div>

<!-- Exclude Patterns -->
<div class="config-section">
    <h4><i class="bi bi-x-circle-fill"></i> Exclude Patterns</h4>
    <ul class="path-list" id="excludeList"></ul>
    <div class="add-path-form">
        <input type="text" id="newExclude" placeholder="*_backup*">
        <button onclick="addExclude()"><i class="bi bi-plus-lg"></i> Add Pattern</button>
    </div>
</div>

<!-- Output Directory -->
<div class="config-section">
    <h4><i class="bi bi-folder2-open"></i> Output Directory</h4>
    <div class="path-item">
        <code id="outputDir">-</code>
    </div>
</div>

<!-- Detected Files -->
<div class="config-section">
    <h4><i class="bi bi-search"></i> Detected Source Files</h4>
    <p class="text-muted small mb-2">List of all files found in source directories and manually added files.</p>
    <div style="max-height: 300px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 4px;">
        <ul class="path-list" id="detectedFilesList" style="margin-bottom: 0;">
            <li class="empty-list">Scanning...</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/modules/config.js') }}?v={{ range(1, 10000) | random }}"></script>
{% endblock %}